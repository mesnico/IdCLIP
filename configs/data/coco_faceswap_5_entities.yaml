defaults:
  - _self_
  - test: general_retrieval
  - train: tok_beginning

datadir: /home/messina/data_messina/DatiMaltese

dataloader: &dataloader
    _target_: torch.utils.data.DataLoader
    batch_size: ${batch_size}
    num_workers: 8
    shuffle: false

train:
  default_collate: true
  dataset:
    _target_: src.data.datasets.CocoCaptions_training
    root: "${data.datadir}/coco_dataset/coco_train_swapped"
    annFile: "${data.datadir}/coco_dataset/annotations/captions_train2017.json"
    features_json: "${data.datadir}/Visual_Name_Entity_Recognition/gender_faceswap_training_set/features_train_small_faceswap.json"
    entity_prompts:
      - "An image with [TOK]."
      - "An image containing [TOK]"
      - "[TOK]."
      - "A picture of [TOK]"
      - "[TOK] in the image."
      - "There is [TOK] in the picture"
  dataloader: 
    <<: *dataloader
    shuffle: true

# validation
val_general_retrieval:  # 5 entities
  dataset:
    _target_: src.data.datasets.CocoCaptions
    root: "${data.datadir}/coco_dataset/coco_val_swap_new/"
    annFile: "${data.datadir}/coco_dataset/annotations/captions_val2017.json"
    features_json: "${data.datadir}/Visual_Name_Entity_Recognition/gender_faceswap_new_val_test_set/features_new_val_small_faceswap.json"
    face_swap_train: true
  dataloader: 
    <<: *dataloader

val_entities_retrieval:  # 5 entities
  dataset:
    _target_: src.data.datasets.CocoCaptions
    root: "${data.datadir}/coco_dataset/coco_val_swap_new/"
    annFile: "${data.datadir}/coco_dataset/annotations/captions_val2017.json"
    features_json: "${data.datadir}/Visual_Name_Entity_Recognition/gender_faceswap_new_val_test_set/features_new_val_small_faceswap.json"
    face_swap_train: true
    only_TOK: true
    single_caption: true
  dataloader: 
    <<: *dataloader

test:
  dataset:
    _target_: src.data.datasets.CocoCaptions
    root: "${data.datadir}/coco_dataset/coco_val_swap_new/"
    annFile: "${data.datadir}/coco_dataset/annotations/captions_val2017.json"
    features_json: "${data.datadir}/Visual_Name_Entity_Recognition/gender_faceswap_new_val_test_set/features_new_entities_test_small_faceswap.json"
  dataloader: 
    <<: *dataloader